<?php

declare(strict_types=1);

use DragonCode\SizeSorter\Enums\GroupEnum;
use DragonCode\SizeSorter\SizeSorter;

test('sort', function (?array $input) {
    $actual = SizeSorter::items([
        100 => 'XXL',
        101 => 26,
        102 => 28,
        103 => 'XL',
        104 => 'ONE SIZE',
        105 => 'XXS',
        106 => '2',
        107 => '54',
        108 => 'XS',
        109 => 'S',
        110 => 'M',
        111 => 'L',
        112 => 'L/XL',
        113 => 'XL/2XL',
        114 => 'XS/S',
        115 => 'M/L',
        116 => '80B',
        117 => '75C',
        118 => '70B',
        119 => '75A',
        120 => '75B',
        121 => '36',
        122 => 'XXS-XS',
        123 => 37,
        124 => 38,
        125 => '39',
        126 => '40',
        127 => 'S/M',
        128 => '40х38х19 см',
        129 => '70C',
        130 => '44-46',
        131 => 'some',
        132 => '1',
        133 => '30',
        134 => '32',
        135 => '34',
        136 => '44/46',
        137 => 'XXS/XS',
        138 => 'XXS',
        139 => '52-56',
        140 => '102-104',
        141 => '102-106',
        142 => '102/106',
        143 => '106',
        145 => '110-112',
        144 => '110-114',
        146 => '90/94',
        147 => '94-98',
        148 => '98-102',
        149 => '21',
        150 => '3',
        151 => '40х38х19 sm',
        152 => '40х37х19 см',
        153 => '40х37х20 см',
        154 => '40х38х15 см',
        155 => '41х38х15 см',
        156 => '39х38х15 см',
        157 => '3xl',
        158 => '2xl',
        159 => '2xs',
    ])
        ->orderBy($input)
        ->sort()
        ->all();

    expect($actual)->toMatchSnapshot();
})->with('input groups');

test('real', function () {
    $actual = SizeSorter::items([
        'мягкая щетина',
        'XXXL',
        'XL/2XL',
        '45x30x10 см',
        '90 см',
        '200х21 см',
        '24х17х9 см',
        '140х200 см ',
        '50х70, 215х145 см',
        '25x25x6 см',
        'S - M',
        '56-58 cm ',
        '42х36х10 см',
        'ОДИН РАЗМЕР',
        '35х22х12 см',
        '17 мм ',
        '104 см',
        '46',
        '48',
        '50',
        '52',
        '120 см',
        '9,5*6,5*1 см',
        '30х22х13 см',
        '49х32х11 см',
        '43*28*14 см',
        '58 cm',
        '8 шт',
        '23-26',
        '46х40х15см ',
        'S/M',
        'One size',
        '107 cm',
        '30 мл',
        '48х34 см',
        '40x30x11 см',
        '26х12х6 см',
        '42',
        '52x23 см',
        '30x12x10 см',
        'ОДИН РАЗМЕР (170/88/92)',
        '36-37',
        '28*5*18 см',
        '50x35x12 см',
        '9,5х7х0,5 см',
        '58.5*48*22 см',
        '18 см',
        '52x45x8 см',
        '46х40х15 см',
        '66 см',
        'ОДИН РАЗМЕР (170-88-96)',
        '55,5*9,5*25cm',
        'ONE SIZE ',
        '40х30х13 см',
        '43x30x15 см',
        '35-37',
        '19',
        '460 мл',
        '50*45*45 см',
        '35*21*10 см',
        '38-40',
        '80 см',
        '180х14 см',
        'ОД ИН РАЗМЕР',
        '20 мл',
        '17 мм',
        '45x32 см',
        '18 мм',
        '23',
        '36x35x12 см',
        '22x14x5 см',
        '18х15 см',
        '60х35х17 см',
        'Один размер',
        '17-18',
        'XXS/XS',
        '50х28х10 см',
        '42х41х7 см',
        '43',
        '8.5*5.5 см',
        '50 мл',
        '54',
        '25х15х7 см',
        '50х35 см',
        '60x38x16 см',
        '10*8*0,5 см',
        '70C',
        '39х29х15 см',
        '38-39',
        '40-41',
        '60х30х20 см',
        '42х32х12 см',
        '35*40 см',
        '20',
        '72,5*72,5 см',
        '33x25x8 см',
        '44х35 см',
        '107 см',
        '118 см',
        '90 листов, 21*14.7 см',
        '40*36.5*13см',
        '2XL',
        '80C',
        '36',
        '37',
        '38',
        '38х16х14 см',
        '45x34 см',
        '39',
        '40',
        '30х25х7 см',
        '43х26х11 см',
        '41',
        'XL',
        'XXL',
        'M',
        'L',
        '44',
        '45',
        '80D',
        '85C',
        '120х55 см',
        '90 листов, 18*16 см',
        '70B',
        '75A',
        '37-38',
        '75B',
        '25',
        '1',
        '2',
        '3',
        '75C',
        '50x40x20 см',
        '80B',
        '85B',
        '17',
        '18',
        '41-43',
        'XXS',
        'L/XL',
        '26',
        '21-23',
        '28',
        '30',
        '40x27x13 см',
        'ONE SIZE',
        '115 см',
        '19-21',
        '23-25',
        '105 см',
        '125 см',
        '32',
        '34',
        '36-38',
        '39-41',
        '20x20 см',
        '60Х36.5 см',
        '100 см',
        'M/L',
        '110 см',
        'XS/S',
        'XS',
        'S',
        '90 листов, 14*12 см',
        '300 мл',
        '440 мл',
    ])
        ->sort()
        ->all();

    expect($actual)->toMatchSnapshot();
});

it('fallback test for snapshot: empty', function () {
    $actual = SizeSorter::items([
        100 => 'XXL',
        101 => 26,
        102 => 28,
        103 => 'XL',
        104 => 'ONE SIZE',
        105 => 'XXS',
        106 => '2',
        107 => '54',
        108 => 'XS',
        109 => 'S',
        110 => 'M',
        111 => 'L',
        112 => 'L/XL',
        113 => 'XL/2XL',
        114 => 'XS/S',
        115 => 'M/L',
        116 => '80B',
        117 => '75C',
        118 => '70B',
        119 => '75A',
        120 => '75B',
        121 => '36',
        122 => 'XXS-XS',
        123 => 37,
        124 => 38,
        125 => '39',
        126 => '40',
        127 => 'S/M',
        128 => '40х38х19 см',
        129 => '70C',
        130 => '44-46',
        131 => 'some',
        132 => '1',
        133 => '30',
        134 => '32',
        135 => '34',
        136 => '44/46',
        137 => 'XXS/XS',
        138 => 'XXS',
        139 => '52-56',
        140 => '102-104',
        141 => '102-106',
        142 => '102/106',
        143 => '106',
        145 => '110-112',
        144 => '110-114',
        146 => '90/94',
        147 => '94-98',
        148 => '98-102',
        149 => '21',
        150 => '3',
        151 => '40х38х19 sm',
        152 => '40х37х19 см',
        153 => '40х37х20 см',
        154 => '40х38х15 см',
        155 => '41х38х15 см',
        156 => '39х38х15 см',
        157 => '3xl',
        158 => '2xl',
        159 => '2xs',
    ])
        ->orderBy(null)
        ->sort()
        ->all();

    expect($actual)->toMatchSnapshot();
});

it('fallback test for snapshot: full', function () {
    $actual = SizeSorter::items([
        100 => 'XXL',
        101 => 26,
        102 => 28,
        103 => 'XL',
        104 => 'ONE SIZE',
        105 => 'XXS',
        106 => '2',
        107 => '54',
        108 => 'XS',
        109 => 'S',
        110 => 'M',
        111 => 'L',
        112 => 'L/XL',
        113 => 'XL/2XL',
        114 => 'XS/S',
        115 => 'M/L',
        116 => '80B',
        117 => '75C',
        118 => '70B',
        119 => '75A',
        120 => '75B',
        121 => '36',
        122 => 'XXS-XS',
        123 => 37,
        124 => 38,
        125 => '39',
        126 => '40',
        127 => 'S/M',
        128 => '40х38х19 см',
        129 => '70C',
        130 => '44-46',
        131 => 'some',
        132 => '1',
        133 => '30',
        134 => '32',
        135 => '34',
        136 => '44/46',
        137 => 'XXS/XS',
        138 => 'XXS',
        139 => '52-56',
        140 => '102-104',
        141 => '102-106',
        142 => '102/106',
        143 => '106',
        145 => '110-112',
        144 => '110-114',
        146 => '90/94',
        147 => '94-98',
        148 => '98-102',
        149 => '21',
        150 => '3',
        151 => '40х38х19 sm',
        152 => '40х37х19 см',
        153 => '40х37х20 см',
        154 => '40х38х15 см',
        155 => '41х38х15 см',
        156 => '39х38х15 см',
        157 => '3xl',
        158 => '2xl',
        159 => '2xs',
    ])
        ->orderBy(GroupEnum::sorted())
        ->sort()
        ->all();

    expect($actual)->toMatchSnapshot();
});

it('fallback test for snapshot: partial', function () {
    $actual = SizeSorter::items([
        100 => 'XXL',
        101 => 26,
        102 => 28,
        103 => 'XL',
        104 => 'ONE SIZE',
        105 => 'XXS',
        106 => '2',
        107 => '54',
        108 => 'XS',
        109 => 'S',
        110 => 'M',
        111 => 'L',
        112 => 'L/XL',
        113 => 'XL/2XL',
        114 => 'XS/S',
        115 => 'M/L',
        116 => '80B',
        117 => '75C',
        118 => '70B',
        119 => '75A',
        120 => '75B',
        121 => '36',
        122 => 'XXS-XS',
        123 => 37,
        124 => 38,
        125 => '39',
        126 => '40',
        127 => 'S/M',
        128 => '40х38х19 см',
        129 => '70C',
        130 => '44-46',
        131 => 'some',
        132 => '1',
        133 => '30',
        134 => '32',
        135 => '34',
        136 => '44/46',
        137 => 'XXS/XS',
        138 => 'XXS',
        139 => '52-56',
        140 => '102-104',
        141 => '102-106',
        142 => '102/106',
        143 => '106',
        145 => '110-112',
        144 => '110-114',
        146 => '90/94',
        147 => '94-98',
        148 => '98-102',
        149 => '21',
        150 => '3',
        151 => '40х38х19 sm',
        152 => '40х37х19 см',
        153 => '40х37х20 см',
        154 => '40х38х15 см',
        155 => '41х38х15 см',
        156 => '39х38х15 см',
        157 => '3xl',
        158 => '2xl',
        159 => '2xs',
    ])
        ->orderBy([
            GroupEnum::OtherSizes,
            GroupEnum::BraSize,
        ])
        ->sort()
        ->all();

    expect($actual)->toMatchSnapshot();
});

it('fallback test for snapshot: full random', function () {
    $actual = SizeSorter::items([
        100 => 'XXL',
        101 => 26,
        102 => 28,
        103 => 'XL',
        104 => 'ONE SIZE',
        105 => 'XXS',
        106 => '2',
        107 => '54',
        108 => 'XS',
        109 => 'S',
        110 => 'M',
        111 => 'L',
        112 => 'L/XL',
        113 => 'XL/2XL',
        114 => 'XS/S',
        115 => 'M/L',
        116 => '80B',
        117 => '75C',
        118 => '70B',
        119 => '75A',
        120 => '75B',
        121 => '36',
        122 => 'XXS-XS',
        123 => 37,
        124 => 38,
        125 => '39',
        126 => '40',
        127 => 'S/M',
        128 => '40х38х19 см',
        129 => '70C',
        130 => '44-46',
        131 => 'some',
        132 => '1',
        133 => '30',
        134 => '32',
        135 => '34',
        136 => '44/46',
        137 => 'XXS/XS',
        138 => 'XXS',
        139 => '52-56',
        140 => '102-104',
        141 => '102-106',
        142 => '102/106',
        143 => '106',
        145 => '110-112',
        144 => '110-114',
        146 => '90/94',
        147 => '94-98',
        148 => '98-102',
        149 => '21',
        150 => '3',
        151 => '40х38х19 sm',
        152 => '40х37х19 см',
        153 => '40х37х20 см',
        154 => '40х38х15 см',
        155 => '41х38х15 см',
        156 => '39х38х15 см',
        157 => '3xl',
        158 => '2xl',
        159 => '2xs',
    ])
        ->orderBy([
            GroupEnum::OtherSizes,
            GroupEnum::BraSize,
            GroupEnum::ClothesAndShoes,
            GroupEnum::OverallDimensions,
            GroupEnum::LetterClothingSize,
        ])
        ->sort()
        ->all();

    expect($actual)->toMatchSnapshot();
});
