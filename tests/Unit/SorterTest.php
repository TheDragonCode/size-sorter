<?php

declare(strict_types=1);

namespace Tests\Unit;

use DragonCode\SizeSorter\Enums\GroupEnum;
use DragonCode\SizeSorter\SizeSorter;
use PHPUnit\Framework\Attributes\DataProvider;
use Tests\TestCase;

class SorterTest extends TestCase
{
    #[DataProvider('sortData')]
    public function testDefault(array $expected, ?array $groups = null): void
    {
        $actual = SizeSorter::items($this->values)
            ->orderBy($groups)
            ->sort()
            ->all();

        $this->assertSame($expected, $actual);
    }

    public static function sortData(): array
    {
        return [
            'default' => [
                'expected' => [
                    108 => 'XS',
                    109 => 'S',
                    114 => 'XS/S',
                    127 => 'S/M',
                    105 => 'XXS',
                    122 => 'XXS-XS',
                    137 => 'XXS/XS',
                    138 => 'XXS',
                    159 => '2xs',
                    110 => 'M',
                    115 => 'M/L',
                    103 => 'XL',
                    111 => 'L',
                    112 => 'L/XL',
                    113 => 'XL/2XL',
                    100 => 'XXL',
                    158 => '2xl',
                    157 => '3xl',
                    132 => '1',
                    106 => '2',
                    150 => '3',
                    149 => '21',
                    101 => 26,
                    102 => 28,
                    133 => '30',
                    134 => '32',
                    135 => '34',
                    121 => '36',
                    123 => 37,
                    124 => 38,
                    125 => '39',
                    126 => '40',
                    130 => '44-46',
                    136 => '44/46',
                    139 => '52-56',
                    107 => '54',
                    146 => '90/94',
                    147 => '94-98',
                    148 => '98-102',
                    140 => '102-104',
                    141 => '102-106',
                    142 => '102/106',
                    143 => '106',
                    145 => '110-112',
                    144 => '110-114',
                    116 => '80B',
                    117 => '75C',
                    118 => '70B',
                    119 => '75A',
                    120 => '75B',
                    129 => '70C',
                    128 => '40х38х19 см',
                    151 => '40х38х19 sm',
                    152 => '40х37х19 см',
                    153 => '40х37х20 см',
                    154 => '40х38х15 см',
                    155 => '41х38х15 см',
                    156 => '39х38х15 см',
                    104 => 'ONE SIZE',
                    131 => 'some',
                ],
            ],

            'partial groups' => [
                'groups' => [
                    GroupEnum::OtherSizes,
                    GroupEnum::BraSize,
                ],

                'expected' => [
                    104 => 'ONE SIZE',
                    131 => 'some',
                    116 => '80B',
                    117 => '75C',
                    118 => '70B',
                    119 => '75A',
                    120 => '75B',
                    129 => '70C',
                    108 => 'XS',
                    109 => 'S',
                    114 => 'XS/S',
                    127 => 'S/M',
                    105 => 'XXS',
                    122 => 'XXS-XS',
                    137 => 'XXS/XS',
                    138 => 'XXS',
                    159 => '2xs',
                    110 => 'M',
                    115 => 'M/L',
                    103 => 'XL',
                    111 => 'L',
                    112 => 'L/XL',
                    113 => 'XL/2XL',
                    100 => 'XXL',
                    158 => '2xl',
                    157 => '3xl',
                    132 => '1',
                    106 => '2',
                    150 => '3',
                    149 => '21',
                    101 => 26,
                    102 => 28,
                    133 => '30',
                    134 => '32',
                    135 => '34',
                    121 => '36',
                    123 => 37,
                    124 => 38,
                    125 => '39',
                    126 => '40',
                    130 => '44-46',
                    136 => '44/46',
                    139 => '52-56',
                    107 => '54',
                    146 => '90/94',
                    147 => '94-98',
                    148 => '98-102',
                    140 => '102-104',
                    141 => '102-106',
                    142 => '102/106',
                    143 => '106',
                    145 => '110-112',
                    144 => '110-114',
                    128 => '40х38х19 см',
                    151 => '40х38х19 sm',
                    152 => '40х37х19 см',
                    153 => '40х37х20 см',
                    154 => '40х38х15 см',
                    155 => '41х38х15 см',
                    156 => '39х38х15 см',
                ],
            ],

            'full groups' => [
                'groups' => [
                    GroupEnum::OtherSizes,
                    GroupEnum::BraSize,
                    GroupEnum::OverallDimensions,
                    GroupEnum::LetterClothingSize,
                    GroupEnum::ClothesAndShoes,
                ],

                'expected' => [
                    104 => 'ONE SIZE',
                    131 => 'some',
                    116 => '80B',
                    117 => '75C',
                    118 => '70B',
                    119 => '75A',
                    120 => '75B',
                    129 => '70C',
                    128 => '40х38х19 см',
                    151 => '40х38х19 sm',
                    152 => '40х37х19 см',
                    153 => '40х37х20 см',
                    154 => '40х38х15 см',
                    155 => '41х38х15 см',
                    156 => '39х38х15 см',
                    108 => 'XS',
                    109 => 'S',
                    114 => 'XS/S',
                    127 => 'S/M',
                    105 => 'XXS',
                    122 => 'XXS-XS',
                    137 => 'XXS/XS',
                    138 => 'XXS',
                    159 => '2xs',
                    110 => 'M',
                    115 => 'M/L',
                    103 => 'XL',
                    111 => 'L',
                    112 => 'L/XL',
                    113 => 'XL/2XL',
                    100 => 'XXL',
                    158 => '2xl',
                    157 => '3xl',
                    132 => '1',
                    106 => '2',
                    150 => '3',
                    149 => '21',
                    101 => 26,
                    102 => 28,
                    133 => '30',
                    134 => '32',
                    135 => '34',
                    121 => '36',
                    123 => 37,
                    124 => 38,
                    125 => '39',
                    126 => '40',
                    130 => '44-46',
                    136 => '44/46',
                    139 => '52-56',
                    107 => '54',
                    146 => '90/94',
                    147 => '94-98',
                    148 => '98-102',
                    140 => '102-104',
                    141 => '102-106',
                    142 => '102/106',
                    143 => '106',
                    145 => '110-112',
                    144 => '110-114',
                ],
            ],
        ];
    }
}
